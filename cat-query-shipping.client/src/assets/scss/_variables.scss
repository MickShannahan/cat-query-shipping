$body-bg: #2A2F32;
$primary: #498d96;
$secondary: #234244;
$success: #499678;
$info: #A4D5A5;
$warning: #FBE8A5;
$danger: #DD5F57;
$light: #e9ecef;
$dark: #2A2F32;
$grey: #4e585e;
$orange: #EEA057;
$light-blue: #48B6C5;


$font-sans-serif: Open Sans;
$font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
$gradient: linear-gradient(180deg, hsla(0, 0%, 100%, 0.15), hsla(0, 0%, 100%, 0));

$colors: (
  "primary": $primary,
  "secondary": $secondary,
  "danger": $danger,
  "success": $success,
  "warning": $warning,
  "info": $info,
  "dark": $dark,
  "grey": $grey,
);

$color-ranges: (
  0: 0,
  5: 5,
  10: 10,
  15: 15,
  20: 20,
  25: 25,
  30: 30,
  35: 35,
  40: 40,
);

$themeProperties: (
  primary: 'primary',
  secondary: 'secondary',
  success: 'success',
  warning: 'warning',
  danger: 'danger',
  screenColor: 'screenColor',
  console: 'console',
  accent: 'accent',
  console2: 'console2',
);

$themes: (
  union: (primary: #A4D5A5,
    secondary: #498d96,
    success: #499678,
    warning: #FBE8A5,
    danger: #DD5F57,
    screenColor: #161d1b,
    screenBackground: '/src/assets/img/Textures/black-orchid.png',
    console: #498d96,
    accent: #6de9f9,
    console2: #A4D5A5),
  rad: (primary: #F61794,
    secondary: #a625c0,
    success: #40A890,
    warning: #BEC43F,
    danger: #cd1953,
    screenColor: #231e2c,
    screenBackground: '/src/assets/img/Textures/black-orchid.png',
    console: #498d96,
    accent: #6de9f9,
    console2: #A4D5A5),
  retro: (primary: #1bff98,
    secondary: #73ffc0,
    success: #21ac6d,
    warning: #61be94,
    danger: #497963,
    screenColor: #425e51,
    screenBackground: '/src/assets/img/Textures/black-orchid.png',
    console: #98a09d,
    accent: #7d8582,
    console2: #eb9deb),
  sphinx: (primary: #44423f,
    secondary: #2c2a28,
    success: #665741,
    warning: #666666,
    danger: #1f1e1d,
    screenColor: #aaa894,
    screenBackground: '/src/assets/img/Textures/subtle-dots.png',
    console: #dfd3bb,
    accent: #726965,
    console2: #4b4948),
);

@mixin themed() {

  @each $theme,
  $map in $themes {
    .theme--#{$theme} & {
      $theme-map: () !global;

      @each $key,
      $submap in $map {
        $value: map-get(map-get($themes, $theme), '#{$key}');
        $theme-map: map-merge($theme-map, ($key: $value)) !global;
      }

      @content;
      $theme-map: null !global;
    }
  }
}

@function _($key) {
  @return map-get($theme-map, $key);
}

// Themed things, TODO move this later

// text
@each $prop,
$val in $themeProperties {
  .text-theme-#{$val} {
    @include themed() {
      color: _($val);

      &:active,
      :focus {
        color: _($val);
      }
    }
  }

}


@each $prop,
$val in $themeProperties {
  .border-theme-#{$val} {
    @include themed() {
      border-color: _($val) !important;
    }
  }

}

// Consoles
@each $prop,
$val in $themeProperties {
  .console-#{$val} {
    @include themed() {
      // -------
      background-color: _($val);
      $lighter: lighten(adjust-hue(_($val), -7), 6);
      $darker: darken(adjust-hue(_($val), 10), 10);

      &.plastic {
        background-image: url(/src/assets/img/Textures/egg-shell.png);
        background-size: 215px;
      }

      .mod-panel {
        background-color: _('accent');
        background-image: url('/src/assets/img/Textures/carbon-fibre.png');
        border-radius: 2px;
      }

      .mod-btn {
        border: 2px inset _('console');
        background-color: darken(_('console'), 10%);
      }

      .mod-thumb {
        border: 3px outset _('console');
        background-color: _('console');
      }


      &.outset {
        border-top: 6px solid $lighter;
        border-left: 6px solid $lighter;
        border-bottom: 6px solid $darker;
        border-right: 6px solid $darker;
        border-radius: 10px;
      }

      .inset {
        border-top: 5px solid $darker;
        border-left: 5px solid $darker;
        border-bottom: 5px solid $lighter;
        border-right: 5px solid $lighter;
      }

      .comp-button::before {
        position: absolute;
        content: "";
        width: 102%;
        height: 102%;
        top: -1px;
        left: -1px;
        border-radius: inherit;
        outline: 3px inset $lighter;
        transition: all 150ms cubic-bezier(0, 0, 0.58, 1);
        transform: translate3d(0, 0.75em, -1em);
      }

      .comp-button:hover::before {
        transform: translate3d(0, 0.6em, -1em);
      }

      .comp-button:active::before {
        transform: translate3d(0, 0, -0.75em);
      }

      // -------
    }
  }
}

.screen-theme {
  @include themed() {
    background-color: _('screenColor');
    background-image: url(_('screenBackground'));
    box-shadow: inset 0px 0px 10px transparentize(_('primary'), .5);

    &-variant {
      background-color: lighten(_('screenColor'), 5%);
    }

    // backgrounds
    @each $prop,
    $val in $themeProperties {
      .bg-theme-#{$val} {
        background-color: transparentize(_($val), .2) !important;
        color: _('screenColor');
      }
    }

    &.input {
      box-shadow: inset 0px 0px 3px transparentize(_('primary'), .5);

      &:focus {
        background-color: _('screenColor') !important;
        background-image: url(_('screenBackground')) !important;
      }

      &:active {
        background-color: _('screenColor') !important;
        background-image: url(_('screenBackground')) !important;
      }
    }


    // buttons
    button {
      background-color: transparent;
      border-style: solid;
      border-width: 1px;

      &:hover {
        background-color: _('warning') !important;
        color: _('screenColor');
        box-shadow: 0px 0px 3px _('warning');
      }
    }


    @each $prop,
    $val in $themeProperties {
      .btn-theme-#{$val} {
        background-color: transparent !important;
        border-color: _($val);
        color: _($val);

        &:hover {
          background-color: transparentize(_($val), .3) !important;
          color: _('screenColor');
          box-shadow: 0px 0px 3px _($val);
        }

        &.active {
          background-color: _('warning') !important;
          color: _('screenColor');
          box-shadow: 0px 0px 3px _('warning');
        }
      }
    }

    // SCROLL BAR

    &::-webkit-scrollbar-track {
      position: absolute;
      //  -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
      background-color: transparent;
      outline: 1px solid _('primary');
      border-radius: 0px;
    }

    &::-webkit-scrollbar-thumb {
      background-color: _('primary');
      border-radius: 0px;
    }

    &::-webkit-scrollbar {
      position: absolute;
      width: 10px;
      background-color: transparent;
    }
  }
}