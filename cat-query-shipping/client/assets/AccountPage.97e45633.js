var K=Object.defineProperty;var D=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var L=(l,o,d)=>o in l?K(l,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[o]=d,R=(l,o)=>{for(var d in o||(o={}))Q.call(o,d)&&L(l,d,o[d]);if(D)for(var d of D(o))W.call(o,d)&&L(l,d,o[d]);return l};import{a as g,s as X,A as Y,c as w,b as z,v as $,o as i,d as m,e,q as x,g as ee,x as p,Z as te,t as c,a0 as oe,i as u,f as ae,F as O,j as Z,p as le,m as se,ab as de,n as ce}from"./vendor.3df41904.js";import{a as H,l as y,A as _,_ as ie,b as J,P as C}from"./index.465dcfc5.js";class re{async getProfiles(){let o=await H.get("api/profiles");y.log(o.data),_.profiles=o.data,this.getLeaderAwards(_.profiles[0].id)}async getLeaderAwards(o){_.leaderAwards=[];const d=await H.get(`api/profiles/${o}/awards`);_.leaderAwards=d.data}}const ne=new re;const me={name:"Account",setup(){const l=g(!1),o=g({}),d=g("edit employee record"),t=g([]),v=g({});X(()=>{document.body.style.backgroundImage="radial-gradient(rgba(2, 0, 36, 0), rgba(34, 65, 60, 0.7)), url('/assets/img/bg/Cups-room-cup.png')",f()}),Y(()=>{ne.getProfiles(),o.value=R({},_.account),A()});function A(){var b;v.value=o.value.favoriteCollectable;const s=(b=_.account.inventory)==null?void 0:b.filter(n=>n.type=="collectable");if(!s)return[];const r={};s.forEach(n=>r[n.id]=n),t.value=Object.keys(r).map(n=>r[n]).sort(n=>n.name==_.account.favoriteCollectable.name?-1:0)}async function f(){try{J.getAwards()}catch(s){y.error(s),C.error(s)}}return{editMode:l,editable:o,editTip:d,collectables:t,selectedCollectable:v,account:w(()=>_.account),leaderboard:w(()=>_.profiles.filter(s=>s.credits>0).sort((s,r)=>r.totalCredits-s.totalCredits)),leaderAwards:w(()=>_.leaderAwards.filter(s=>s.count>0)),async editAccount(){try{l.value?(o.value.favoriteCollectable=v.value.id,await J.editAccount(o.value),C.toast("Employee record updated","success"),l.value=!1,d.value="edit employee record"):(l.value=!0,d.value="save record")}catch(s){C.toast(s),y.error(s)}},swapCollectable(s){let r=s.target.value;v.value=t.value[r]}}}},h=l=>(le("data-v-098d6ad6"),l=l(),se(),l),_e={class:"container text-center"},ue={class:"row mt-5 about justify-content-center"},ve={class:"col-12 col-lg-5 me-lg-5 mb-3 p-lg-0"},be={class:"row bg-warning rounded lighten-10 shadow p-3"},ge={class:"col-4"},he={key:0,class:"position-relative"},pe=["src"],fe=["src"],we={class:"col-8 text-start position-relative"},xe={key:0,class:"text-primary"},ye=h(()=>e("i",{class:"mdi mdi-google-podcast mx-1"},null,-1)),Ce=h(()=>e("b",null,"Recovered Shipments:",-1)),Ae={class:"text-primary"},ke={key:2},Se=["src"],Me=["max"],Pe={class:"col-lg-6 shadow bg-primary lighten-20 rounded p-3 mb-5"},je={class:"row justif-content-center leader-border p-2 mx-3"},Be=h(()=>e("h4",{class:"col-12 text-center"},[e("i",{class:"mdi mdi-cat mx-1"}),u("Employee of the Cycle"),e("i",{class:"mdi mdi-cat mx-1"})],-1)),Ee={class:"col-6"},Ie={class:"text-dark"},Ne=h(()=>e("i",{class:"mdi mdi-google-podcast mx-1"},null,-1)),Ve=h(()=>e("b",null,"Recovered Shipments:",-1)),Fe={class:"text-primary"},Ge={class:"d-flex flex-wrap"},Te={class:"award-icon m-1"},Ue=["src"],qe={class:"col-6 mb-5"},De={class:"position-relative"},Le=["src"],Re=["src"],ze=de('<section class="row text-primary mt-3" data-v-098d6ad6><div class="col-4" data-v-098d6ad6>name</div><div class="col-3" data-v-098d6ad6><i class="mdi mdi-google-podcast mx-1" data-v-098d6ad6></i></div><div class="col-2" data-v-098d6ad6><i class="mdi mdi-package mx-1" data-v-098d6ad6></i></div><div class="col-3" data-v-098d6ad6><i class="mdi mdi-smart-card mx-1" data-v-098d6ad6></i></div></section>',1),Oe={class:"row p-0"},Ze={class:"leaderboard h-25"},He={class:"col-12 p-0"},Je={class:"col-4 list-border"},Ke={class:"col-3 list-border"},Qe={class:"col-2 list-border"},We={class:"col-3 list-border"};function Xe(l,o,d,t,v,A){var b,n,k,S,M,P,j,B,E,I,N,V,F,G,T,U;const f=z("UploadButton"),s=z("AwardsThread"),r=$("tooltip");return i(),m("div",_e,[e("div",ue,[e("div",ve,[e("div",be,[e("div",ge,[t.editMode?(i(),ee(f,{key:1,onUploadComplete:o[0]||(o[0]=a=>t.editable.picture=a.url),options:{class:"w-100 btn btn-white form-control px-3 py-5",spinner:"\u{1F431}"}})):(i(),m("div",he,[e("img",{class:"img-fluid border-2 border-warningS rounded-1",src:t.account.picture,alt:""},null,8,pe),((n=(b=t.account)==null?void 0:b.favoriteCollectable)==null?void 0:n.img)?(i(),m("img",{key:0,class:"account-collectable",src:(S=(k=t.account)==null?void 0:k.favoriteCollectable)==null?void 0:S.img,alt:""},null,8,fe)):x("",!0)]))]),e("div",we,[p(e("i",{class:"mdi mdi-cancel me-5 icon selectable text-danger darken-10 p-1 px-2 rounded",onClick:o[1]||(o[1]=a=>t.editMode=!t.editMode)},null,512),[[te,t.editMode],[r,"cancel","auto"]]),p(e("i",{class:"mdi mdi-pencil icon selectable text-warning darken-40 p-1 px-2 rounded",onClick:o[2]||(o[2]=(...a)=>t.editAccount&&t.editAccount(...a))},null,512),[[r,"edit account","auto"]]),t.editMode?p((i(),m("input",{key:1,class:"form-control w-75",type:"text",placeholder:"Enter Name..","onUpdate:modelValue":o[3]||(o[3]=a=>t.editable.name=a),minlength:"5",maxlength:"15",required:""},null,512)),[[oe,t.editable.name]]):(i(),m("h5",xe,c(t.account.name),1)),e("div",null,[ye,u(c(t.account.credits),1)]),e("div",null,[Ce,u(" "+c((M=t.account.shipmentsFound)==null?void 0:M.length),1)]),e("h4",null,[e("b",Ae,c((P=t.account)==null?void 0:P.employeeGrade),1)]),t.editMode&&t.collectables.length?(i(),m("div",ke,[e("small",null,[u("favorite collectable: "+c(t.selectedCollectable.name),1),e("img",{class:"item-thumbnail",src:t.selectedCollectable.img,alt:""},null,8,Se)]),e("input",{value:"0",onInput:o[4]||(o[4]=(...a)=>t.swapCollectable&&t.swapCollectable(...a)),type:"range",class:"w-100",min:0,max:t.collectables.length-1},null,40,Me)])):x("",!0)])]),ae(s)]),e("div",Pe,[e("section",je,[Be,e("div",Ee,[e("h5",Ie,c((j=t.leaderboard[0])==null?void 0:j.name),1),e("div",null,[Ne,u(c((B=t.leaderboard[0])==null?void 0:B.credits),1)]),e("div",null,[Ve,u(" "+c((I=(E=t.leaderboard[0])==null?void 0:E.shipmentsFound)==null?void 0:I.length),1)]),e("h4",null,[e("b",Fe,c(((N=t.leaderboard[0])==null?void 0:N.topGrade)||((V=t.leaderboard[0])==null?void 0:V.employeeGrade)),1)]),e("div",Ge,[(i(!0),m(O,null,Z(t.leaderAwards,a=>p((i(),m("div",Te,[e("img",{src:a.img,alt:""},null,8,Ue)],512)),[[r,`${a.name} ${a.count>1?a.count:""}`,"bottom"]])),256))])]),e("div",qe,[e("div",De,[e("img",{class:"img-fluid border border-primary rounded-1",src:(F=t.leaderboard[0])==null?void 0:F.picture,alt:""},null,8,Le),((G=t.leaderboard[0])==null?void 0:G.favoriteCollectable)?(i(),m("img",{key:0,class:"leader-collectable",src:(U=(T=t.leaderboard[0])==null?void 0:T.favoriteCollectable)==null?void 0:U.img,alt:""},null,8,Re)):x("",!0)])])]),ze,e("section",Oe,[e("div",Ze,[e("div",He,[(i(!0),m(O,null,Z(t.leaderboard.slice(1),a=>{var q;return i(),m("div",{key:a.id,class:ce(["row mt-2 px-2",{"text-warning":a.id==t.account.id,"text-dark":a.id!=t.account.id}])},[e("div",Je,c(a.name),1),e("div",Ke,c(a.totalCredits),1),e("div",Qe,c((q=a.shipmentsFound)==null?void 0:q.length),1),e("div",We,c(a.topGrade||a.employeeGrade),1)],2)}),128))])])])])])])}var tt=ie(me,[["render",Xe],["__scopeId","data-v-098d6ad6"]]);export{tt as default};
