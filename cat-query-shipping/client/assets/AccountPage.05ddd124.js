var H=Object.defineProperty;var T=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var U=(l,o,c)=>o in l?H(l,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[o]=c,q=(l,o)=>{for(var c in o||(o={}))J.call(o,c)&&U(l,c,o[c]);if(T)for(var c of T(o))K.call(o,c)&&U(l,c,o[c]);return l};import{a as h,s as Q,A as W,c as w,b as D,v as X,o as n,d as m,e,g as Y,x as p,Z as $,t as d,a0 as ee,i as u,q as L,f as te,F as R,j as z,p as oe,m as ae,ab as se,n as le}from"./vendor.3df41904.js";import{a as O,l as x,A as _,_ as ce,b as Z,P as y}from"./index.bf88a152.js";class de{async getProfiles(){let o=await O.get("api/profiles");x.log(o.data),_.profiles=o.data,this.getLeaderAwards(_.profiles[0].id)}async getLeaderAwards(o){_.leaderAwards=[];const c=await O.get(`api/profiles/${o}/awards`);_.leaderAwards=c.data}}const ie=new de;const re={name:"Account",setup(){const l=h(!1),o=h({}),c=h("edit employee record"),t=h([]),v=h({});Q(()=>{document.body.style.backgroundImage="radial-gradient(rgba(2, 0, 36, 0), rgba(34, 65, 60, 0.7)), url('/assets/img/bg/Cups-room-cup.png')",f()}),W(()=>{ie.getProfiles(),o.value=q({},_.account),C()});function C(){var b;v.value=o.value.favoriteCollectable;const s=(b=_.account.inventory)==null?void 0:b.filter(r=>r.type=="collectable");if(!s)return[];const i={};s.forEach(r=>i[r.id]=r),t.value=Object.keys(i).map(r=>i[r]).sort(r=>r.name==_.account.favoriteCollectable.name?-1:0)}async function f(){try{Z.getAwards()}catch(s){x.error(s),y.error(s)}}return{editMode:l,editable:o,editTip:c,collectables:t,selectedCollectable:v,account:w(()=>_.account),leaderboard:w(()=>_.profiles.filter(s=>s.credits>0).sort((s,i)=>i.totalCredits-s.totalCredits)),leaderAwards:w(()=>_.leaderAwards.filter(s=>s.count>0)),async editAccount(){try{l.value?(o.value.favoriteCollectable=v.value.id,await Z.editAccount(o.value),y.toast("Employee record updated","success"),l.value=!1,c.value="edit employee record"):(l.value=!0,c.value="save record")}catch(s){y.toast(s==null?void 0:s.error),x.error(s)}},swapCollectable(s){let i=s.target.value;v.value=t.value[i]}}}},g=l=>(oe("data-v-119fad04"),l=l(),ae(),l),ne={class:"container text-center"},me={class:"row mt-5 about justify-content-center"},_e={class:"col-12 col-lg-5 me-lg-5 mb-3 p-lg-0"},ue={class:"row bg-warning rounded lighten-10 shadow p-3"},ve={class:"col-4"},be={key:0,class:"position-relative"},he=["src"],ge=["src"],pe={class:"col-8 text-start position-relative"},fe={key:0,class:"text-primary"},we=g(()=>e("i",{class:"mdi mdi-google-podcast mx-1"},null,-1)),xe=g(()=>e("b",null,"Recovered Shipments:",-1)),ye={class:"text-primary"},Ce={key:2},Ae=["src"],ke=["max"],Se={class:"col-lg-6 shadow bg-primary lighten-20 rounded p-3 mb-5"},Me={class:"row justif-content-center leader-border p-2 mx-3"},Pe=g(()=>e("h4",{class:"col-12 text-center"},[e("i",{class:"mdi mdi-cat mx-1"}),u("Employee of the Cycle"),e("i",{class:"mdi mdi-cat mx-1"})],-1)),je={class:"col-6"},Be={class:"text-dark"},Ee=g(()=>e("i",{class:"mdi mdi-google-podcast mx-1"},null,-1)),Ie=g(()=>e("b",null,"Recovered Shipments:",-1)),Ne={class:"text-primary"},Ve={class:"d-flex flex-wrap"},Fe={class:"award-icon m-1"},Ge=["src"],Te={class:"col-6 mb-5"},Ue={class:"position-relative"},qe=["src"],De=["src"],Le=se('<section class="row text-primary mt-3" data-v-119fad04><div class="col-4" data-v-119fad04>name</div><div class="col-3" data-v-119fad04><i class="mdi mdi-google-podcast mx-1" data-v-119fad04></i></div><div class="col-2" data-v-119fad04><i class="mdi mdi-package mx-1" data-v-119fad04></i></div><div class="col-3" data-v-119fad04><i class="mdi mdi-smart-card mx-1" data-v-119fad04></i></div></section>',1),Re={class:"row p-0"},ze={class:"leaderboard h-25"},Oe={class:"col-12 p-0"},Ze={class:"col-4 list-border"},He={class:"col-3 list-border"},Je={class:"col-2 list-border"},Ke={class:"col-3 list-border"};function Qe(l,o,c,t,v,C){var b,r,A,k,S,M,P,j,B,E,I,N,V,F;const f=D("UploadButton"),s=D("AwardsThread"),i=X("tooltip");return n(),m("div",ne,[e("div",me,[e("div",_e,[e("div",ue,[e("div",ve,[t.editMode?(n(),Y(f,{key:1,onUploadComplete:o[0]||(o[0]=a=>t.editable.picture=a.url),options:{class:"w-100 btn btn-white form-control px-3 py-5",spinner:"\u{1F431}"}})):(n(),m("div",be,[e("img",{class:"img-fluid border-2 border-warningS rounded-1",src:t.account.picture,alt:""},null,8,he),e("img",{class:"account-collectable",src:(r=(b=t.account)==null?void 0:b.favoriteCollectable)==null?void 0:r.img,alt:""},null,8,ge)]))]),e("div",pe,[p(e("i",{class:"mdi mdi-cancel me-5 icon selectable text-danger darken-10 p-1 px-2 rounded",onClick:o[1]||(o[1]=a=>t.editMode=!t.editMode)},null,512),[[$,t.editMode],[i,"cancel","auto"]]),p(e("i",{class:"mdi mdi-pencil icon selectable text-warning darken-40 p-1 px-2 rounded",onClick:o[2]||(o[2]=(...a)=>t.editAccount&&t.editAccount(...a))},null,512),[[i,"edit account","auto"]]),t.editMode?p((n(),m("input",{key:1,class:"form-control w-75",type:"text",placeholder:"Enter Name..","onUpdate:modelValue":o[3]||(o[3]=a=>t.editable.name=a),minlength:"5",maxlength:"15",required:""},null,512)),[[ee,t.editable.name]]):(n(),m("h5",fe,d(t.account.name),1)),e("div",null,[we,u(d(t.account.credits),1)]),e("div",null,[xe,u(" "+d((A=t.account.shipmentsFound)==null?void 0:A.length),1)]),e("h4",null,[e("b",ye,d((k=t.account)==null?void 0:k.employeeGrade),1)]),t.editMode&&t.collectables.length?(n(),m("div",Ce,[e("small",null,[u("favorite collectable: "+d(t.selectedCollectable.name),1),e("img",{class:"item-thumbnail",src:t.selectedCollectable.img,alt:""},null,8,Ae)]),e("input",{value:"0",onInput:o[4]||(o[4]=(...a)=>t.swapCollectable&&t.swapCollectable(...a)),type:"range",class:"w-100",min:0,max:t.collectables.length-1},null,40,ke)])):L("",!0)])]),te(s)]),e("div",Se,[e("section",Me,[Pe,e("div",je,[e("h5",Be,d((S=t.leaderboard[0])==null?void 0:S.name),1),e("div",null,[Ee,u(d((M=t.leaderboard[0])==null?void 0:M.credits),1)]),e("div",null,[Ie,u(" "+d((j=(P=t.leaderboard[0])==null?void 0:P.shipmentsFound)==null?void 0:j.length),1)]),e("h4",null,[e("b",Ne,d(((B=t.leaderboard[0])==null?void 0:B.topGrade)||((E=t.leaderboard[0])==null?void 0:E.employeeGrade)),1)]),e("div",Ve,[(n(!0),m(R,null,z(t.leaderAwards,a=>p((n(),m("div",Fe,[e("img",{src:a.img,alt:""},null,8,Ge)],512)),[[i,`${a.name} ${a.count>1?a.count:""}`,"bottom"]])),256))])]),e("div",Te,[e("div",Ue,[e("img",{class:"img-fluid border border-primary rounded-1",src:(I=t.leaderboard[0])==null?void 0:I.picture,alt:""},null,8,qe),((N=t.leaderboard[0])==null?void 0:N.favoriteCollectable)?(n(),m("img",{key:0,class:"leader-collectable",src:(F=(V=t.leaderboard[0])==null?void 0:V.favoriteCollectable)==null?void 0:F.img,alt:""},null,8,De)):L("",!0)])])]),Le,e("section",Re,[e("div",ze,[e("div",Oe,[(n(!0),m(R,null,z(t.leaderboard.slice(1),a=>{var G;return n(),m("div",{key:a.id,class:le(["row mt-2 px-2",{"text-warning":a.id==t.account.id,"text-dark":a.id!=t.account.id}])},[e("div",Ze,d(a.name),1),e("div",He,d(a.totalCredits),1),e("div",Je,d((G=a.shipmentsFound)==null?void 0:G.length),1),e("div",Ke,d(a.topGrade||a.employeeGrade),1)],2)}),128))])])])])])])}var $e=ce(re,[["render",Qe],["__scopeId","data-v-119fad04"]]);export{$e as default};
