var W=Object.defineProperty;var R=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var z=(l,o,c)=>o in l?W(l,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[o]=c,O=(l,o)=>{for(var c in o||(o={}))X.call(o,c)&&z(l,c,o[c]);if(R)for(var c of R(o))Y.call(o,c)&&z(l,c,o[c]);return l};import{a as f,s as $,A as ee,c as C,b as Z,v as te,o as i,d as m,e,q as A,g as oe,x,Z as ae,t as d,a0 as le,i as u,f as se,F as H,j as J,p as ce,m as de,ab as ie,n as re}from"./vendor.3df41904.js";import{a as K,l as k,A as _,_ as ne,b as Q,P as S}from"./index.4c74a22f.js";class me{async getProfiles(){let o=await K.get("api/profiles");k.log(o.data),_.profiles=o.data,this.getLeaderAwards(_.profiles[0].id)}async getLeaderAwards(o){_.leaderAwards=[];const c=await K.get(`api/profiles/${o}/awards`);_.leaderAwards=c.data}}const _e=new me;const ue={name:"Account",setup(){const l=f(!1),o=f({}),c=f("edit employee record"),t=f([]),v=f({});$(()=>{document.body.style.backgroundImage="radial-gradient(rgba(2, 0, 36, 0), rgba(34, 65, 60, 0.7)), url('/assets/img/bg/Cups-room-cup.png')",y()}),ee(()=>{_e.getProfiles(),o.value=O({},_.account),M()});function M(){var b;const s=(b=_.account.inventory)==null?void 0:b.filter(n=>n.type=="collectable");if(!s)return[];const r={};s.forEach(n=>r[n.id]=n),t.value=Object.keys(r).map(n=>r[n]).sort(n=>{var g,h,p;return((g=_.account)==null?void 0:g.favoriteCollectable)&&n.name==((p=(h=_.account)==null?void 0:h.favoriteCollectable)==null?void 0:p.name)?-1:0}),v.value=t.value[0]}async function y(){try{Q.getAwards()}catch(s){k.error(s),S.error(s)}}return{editMode:l,editable:o,editTip:c,collectables:t,selectedCollectable:v,account:C(()=>_.account),leaderboard:C(()=>_.profiles.filter(s=>s.credits>0).sort((s,r)=>r.totalCredits-s.totalCredits)),leaderAwards:C(()=>_.leaderAwards.filter(s=>s.count>0)),async editAccount(){try{l.value?(o.value.favoriteCollectable=v.value.id,await Q.editAccount(o.value),S.toast("Employee record updated","success"),l.value=!1,c.value="edit employee record"):(l.value=!0,c.value="save record")}catch(s){S.toast(s),k.error(s)}},swapCollectable(s){let r=s.target.value;v.value=t.value[r]}}}},w=l=>(ce("data-v-8d75ac24"),l=l(),de(),l),ve={class:"container text-center"},be={class:"row mt-5 about justify-content-center"},ge={class:"col-12 col-lg-5 me-lg-5 mb-3 p-lg-0"},he={class:"row bg-warning rounded lighten-10 shadow p-3"},pe={class:"col-4"},fe={key:0,class:"position-relative"},we=["src"],xe=["src"],ye={class:"col-8 text-start position-relative"},Ce={key:0,class:"text-primary"},Ae=w(()=>e("i",{class:"mdi mdi-google-podcast mx-1"},null,-1)),ke=w(()=>e("b",null,"Recovered Shipments:",-1)),Se={class:"text-primary"},Me={key:2},Pe=["src"],je=["max"],Be={class:"col-lg-6 shadow bg-primary lighten-20 rounded p-3 mb-5"},Ee={class:"row justif-content-center leader-border p-2 mx-3"},Ie=w(()=>e("h4",{class:"col-12 text-center"},[e("i",{class:"mdi mdi-cat mx-1"}),u("Employee of the Cycle"),e("i",{class:"mdi mdi-cat mx-1"})],-1)),Ne={class:"col-6"},Ve={class:"text-dark"},Fe=w(()=>e("i",{class:"mdi mdi-google-podcast mx-1"},null,-1)),Ge=w(()=>e("b",null,"Recovered Shipments:",-1)),Te={class:"text-primary"},Ue={class:"d-flex flex-wrap"},qe={class:"award-icon m-1"},De=["src"],Le={class:"col-6 mb-5"},Re={class:"position-relative"},ze=["src"],Oe=["src"],Ze=ie('<section class="row text-primary mt-3" data-v-8d75ac24><div class="col-4" data-v-8d75ac24>name</div><div class="col-3" data-v-8d75ac24><i class="mdi mdi-google-podcast mx-1" data-v-8d75ac24></i></div><div class="col-2" data-v-8d75ac24><i class="mdi mdi-package mx-1" data-v-8d75ac24></i></div><div class="col-3" data-v-8d75ac24><i class="mdi mdi-smart-card mx-1" data-v-8d75ac24></i></div></section>',1),He={class:"row p-0"},Je={class:"leaderboard h-25"},Ke={class:"col-12 p-0"},Qe={class:"col-4 list-border"},We={class:"col-3 list-border"},Xe={class:"col-2 list-border"},Ye={class:"col-3 list-border"};function $e(l,o,c,t,v,M){var b,n,g,h,p,P,j,B,E,I,N,V,F,G,T,U,q,D;const y=Z("UploadButton"),s=Z("AwardsThread"),r=te("tooltip");return i(),m("div",ve,[e("div",be,[e("div",ge,[e("div",he,[e("div",pe,[t.editMode?(i(),oe(y,{key:1,onUploadComplete:o[0]||(o[0]=a=>t.editable.picture=a.url),options:{class:"w-100 btn btn-white form-control px-3 py-5",spinner:"\u{1F431}"}})):(i(),m("div",fe,[e("img",{class:"img-fluid border-2 border-warningS rounded-1",src:t.account.picture,alt:""},null,8,we),((n=(b=t.account)==null?void 0:b.favoriteCollectable)==null?void 0:n.img)?(i(),m("img",{key:0,class:"account-collectable",src:(h=(g=t.account)==null?void 0:g.favoriteCollectable)==null?void 0:h.img,alt:""},null,8,xe)):A("",!0)]))]),e("div",ye,[x(e("i",{class:"mdi mdi-cancel me-5 icon selectable text-danger darken-10 p-1 px-2 rounded",onClick:o[1]||(o[1]=a=>t.editMode=!t.editMode)},null,512),[[ae,t.editMode],[r,"cancel","auto"]]),x(e("i",{class:"mdi mdi-pencil icon selectable text-warning darken-40 p-1 px-2 rounded",onClick:o[2]||(o[2]=(...a)=>t.editAccount&&t.editAccount(...a))},null,512),[[r,"edit account","auto"]]),t.editMode?x((i(),m("input",{key:1,class:"form-control w-75",type:"text",placeholder:"Enter Name..","onUpdate:modelValue":o[3]||(o[3]=a=>t.editable.name=a),minlength:"5",maxlength:"15",required:""},null,512)),[[le,t.editable.name]]):(i(),m("h5",Ce,d(t.account.name),1)),e("div",null,[Ae,u(d(t.account.credits),1)]),e("div",null,[ke,u(" "+d((p=t.account.shipmentsFound)==null?void 0:p.length),1)]),e("h4",null,[e("b",Se,d((P=t.account)==null?void 0:P.employeeGrade),1)]),t.editMode&&t.collectables.length?(i(),m("div",Me,[e("small",null,[u("favorite collectable: "+d((j=t.selectedCollectable)==null?void 0:j.name),1),e("img",{class:"item-thumbnail",src:(B=t.selectedCollectable)==null?void 0:B.img,alt:""},null,8,Pe)]),e("input",{value:"0",onInput:o[4]||(o[4]=(...a)=>t.swapCollectable&&t.swapCollectable(...a)),type:"range",class:"w-100",min:0,max:t.collectables.length-1},null,40,je)])):A("",!0)])]),se(s)]),e("div",Be,[e("section",Ee,[Ie,e("div",Ne,[e("h5",Ve,d((E=t.leaderboard[0])==null?void 0:E.name),1),e("div",null,[Fe,u(d((I=t.leaderboard[0])==null?void 0:I.credits),1)]),e("div",null,[Ge,u(" "+d((V=(N=t.leaderboard[0])==null?void 0:N.shipmentsFound)==null?void 0:V.length),1)]),e("h4",null,[e("b",Te,d(((F=t.leaderboard[0])==null?void 0:F.topGrade)||((G=t.leaderboard[0])==null?void 0:G.employeeGrade)),1)]),e("div",Ue,[(i(!0),m(H,null,J(t.leaderAwards,a=>x((i(),m("div",qe,[e("img",{src:a.img,alt:""},null,8,De)],512)),[[r,`${a.name} ${a.count>1?a.count:""}`,"bottom"]])),256))])]),e("div",Le,[e("div",Re,[e("img",{class:"img-fluid border border-primary rounded-1",src:(T=t.leaderboard[0])==null?void 0:T.picture,alt:""},null,8,ze),((U=t.leaderboard[0])==null?void 0:U.favoriteCollectable)?(i(),m("img",{key:0,class:"leader-collectable",src:(D=(q=t.leaderboard[0])==null?void 0:q.favoriteCollectable)==null?void 0:D.img,alt:""},null,8,Oe)):A("",!0)])])]),Ze,e("section",He,[e("div",Je,[e("div",Ke,[(i(!0),m(H,null,J(t.leaderboard.slice(1),a=>{var L;return i(),m("div",{key:a.id,class:re(["row mt-2 px-2",{"text-warning":a.id==t.account.id,"text-dark":a.id!=t.account.id}])},[e("div",Qe,d(a.name),1),e("div",We,d(a.totalCredits),1),e("div",Xe,d((L=a.shipmentsFound)==null?void 0:L.length),1),e("div",Ye,d(a.topGrade||a.employeeGrade),1)],2)}),128))])])])])])])}var at=ne(ue,[["render",$e],["__scopeId","data-v-8d75ac24"]]);export{at as default};
